     1                                  bits 32
     2                                  
     3                                  global _parsare
     4                                  extern _printf
     5                                  
     6                                  segment data public data use32
     7 00000000 256300                  format db "%c",0
     8 00000003 0A000000                zece dd 10
     9                                  
    10                                  
    11                                  segment code public code use32
    12                                  
    13                                  
    14                                  _parsare:
    15                                  
    16 00000000 55                          push ebp
    17 00000001 89E5                        mov ebp,esp
    18                                      
    19 00000003 8B7508                      mov esi,[ebp + 8]
    20 00000006 8B7D0C                      mov edi,[ebp + 12]
    21 00000009 31D2                        xor edx,edx
    22 0000000B 31C9                        xor ecx,ecx
    23                                      
    24                                      .parcurge:
    25 0000000D AA                              stosb
    26 0000000E 3C00                            cmp al,0
    27 00000010 7423                            je .finish
    28 00000012 3C0A                            cmp al,10
    29 00000014 741F                            je .finish
    30                                          
    31 00000016 3C20                            cmp al,' '
    32 00000018 7413                            je .salvare
    33                                          
    34                                          ;daca nu e cifra si formam numarul
    35 0000001A 2C30                            sub al,'0'
    36 0000001C 0FB6D8                          movzx ebx,al ;ebx = uc
    37 0000001F 89D0                            mov eax,edx
    38 00000021 F725[03000000]                  mul dword [zece]    ;eax = eax * 10
    39 00000027 01D8                            add eax,ebx         ;eax = eax * 10 + uc
    40 00000029 89C2                            mov edx,eax ;salvam in edx numarul
    41 0000002B EBE0                            jmp .parcurge
    42                                          
    43                                        .salvare:
    44 0000002D 89D0                            mov eax,edx
    45 0000002F AB                              stosd
    46 00000030 31D2                            xor edx,edx
    47 00000032 41                              inc ecx ;ct de numere
    48 00000033 EBD8                          jmp .parcurge
    49                                        
    50                                      .finish:
    51 00000035 89D0                            mov eax,edx
    52 00000037 AB                              stosd
    53 00000038 31D2                            xor edx,edx
    54 0000003A 41                              inc ecx ;ct de numere
    55                                      
    56 0000003B 89C8                        mov eax,ecx ;salvam ct de numere
    57 0000003D 89EC                        mov esp,ebp
    58 0000003F 5D                          pop ebp
    59 00000040 C3                          ret
    60                                  
    61                                          
    62                                          
    63                                      
