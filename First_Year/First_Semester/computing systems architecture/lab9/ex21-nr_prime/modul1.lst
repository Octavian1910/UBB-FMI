     1                                  bits 32
     2                                  
     3                                  
     4                                  global _parsare
     5                                  
     6                                  segment data public data use32
     7 00000000 00000000                lungime dd 0
     8 00000004 0A000000                zece dd 10
     9                                  
    10                                  segment code public code use32
    11                                  
    12                                  _parsare:
    13                                  
    14 00000000 55                              push ebp
    15 00000001 89E5                            mov ebp,esp
    16                                          
    17 00000003 FC                              cld
    18 00000004 8B5D08                          mov ebx,[ebp + 8]  ; sir
    19 00000007 8B750C                          mov esi,[ebp + 12] ; v
    20 0000000A 31C9                            xor ecx,ecx
    21                                          
    22                                          .parcurge:
    23 0000000C AC                                  lodsb
    24 0000000D 3C00                                cmp al,0
    25 0000000F 7426                                je .finish
    26 00000011 3C0A                                cmp al,10
    27 00000013 7422                                je .finish
    28                                              
    29 00000015 3C20                                cmp al,' '
    30 00000017 7416                                je .salvare
    31                                  
    32                                              ;e cifra
    33 00000019 88C3                                mov bl,al  ; uc
    34 0000001B 80EB30                              sub bl,'0'
    35 0000001E 0FB7DB                              movzx ebx,bx
    36                                             
    37 00000021 89D0                                mov eax,edx
    38 00000023 F725[04000000]                      mul dword [zece] ; eax= eax*10
    39 00000029 01D8                                add eax,ebx  ; eax= eax*10 + uc
    40 0000002B 89C2                                mov edx,eax
    41 0000002D EBDD                            jmp .parcurge
    42                                          
    43                                          .salvare:
    44 0000002F 89D0                                mov eax,edx
    45 00000031 41                                  inc ecx
    46 00000032 31D2                                xor edx,edx
    47 00000034 AB                                  stosd
    48 00000035 EBD5                            jmp .parcurge
    49                                          
    50                                          .finish:
    51 00000037 89D0                                mov eax,edx
    52 00000039 41                                  inc ecx
    53 0000003A AB                                  stosd
    54                                          
    55 0000003B 89C8                            mov eax,ecx  ;eax = lungime
    56 0000003D 89EC                            mov esp,ebp
    57 0000003F 5D                              pop ebp
    58 00000040 C3                              ret
    59                                          
